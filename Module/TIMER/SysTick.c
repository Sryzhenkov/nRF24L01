#include "SysTick.h"

///////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////
volatile uint32_t   sys_timecount =0;
//////////////////////////////////////////////////////////////////////////////////////////////////////////////
//-----------------------------------хмхжхюкхгюжхъ яхярелмнцн рюилепю -----------------------------------------
void SysTick_Init(void)
{
  SysTick->CTRL = 0x00;
  SysTick->LOAD = 0x01193F;
  SysTick->VAL = 0x00;
  *(volatile uint32_t*)(0xE000ED20) = 0x40C00000;
  SysTick->CTRL = 0x07;
}
 
///////////////////////////////////////////////////////////////////////////////////////////////////////////////
//-----------------------------------напюанрвхй опепшбюмхъ яхярелмнцн рюилепю ---------------------------------
void SysTick_Handler(void)
{  
  sys_timecount++; 
/*
  for(uint32_t i = 0; i < 1; i++)
  	{
  		if(sTimer[i].active != 0)
  		{
  			sTimer[i].holdup --;
  			if(sTimer[i].holdup == 0)
  			{
  				sTimer[i].flag = 1;
  				sTimer[i].active = 0;
  			}
  		}
  	}*/
}
//-------------------------------------------------------------------------------------------------------------
///////////////////////////////////////////////////////////////////////////////////////////////////////////////
void delay(uint32_t milliseconds)
{

	uint32_t start = sys_timecount;

	while((sys_timecount - start) < milliseconds);
}
